<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>pra minha lalinha</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root {--bg:#000;--text:#fff;}
  *{margin:0;padding:0;box-sizing:border-box;}
  html,body{
    height:100%;width:100%;
    background:var(--bg);color:var(--text);
    font-family:'Inter',sans-serif;
    overflow:hidden;
    display:flex;align-items:center;justify-content:center;
  }
  #start{
    position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
    background:#000;z-index:10;flex-direction:column;
  }
  #start button{
    font-size:1.1rem;font-weight:600;
    color:#000;background:#fff;border:none;border-radius:8px;
    padding:14px 32px;cursor:pointer;transition:transform .3s ease;
  }
  #start button:hover{transform:scale(1.05);}
  .stage{
    position:absolute;inset:0;
    display:flex;align-items:center;justify-content:center;
    flex-direction:column;overflow:hidden;
  }
  .img-bg{
    position:absolute;inset:0;
    display:flex;align-items:center;justify-content:center;
    z-index:0;
  }
  .img-bg img{
    width:80%;max-width:800px;border-radius:10px;
    opacity:0;transition:opacity 1s ease;
    box-shadow:0 30px 80px rgba(0,0,0,.7);
  }
  .img-bg img.show{opacity:1;}
  .text{
    position:relative;
    z-index:2;
    font-size:1.2rem;
    text-align:center;
    width:90%;
    max-width:700px;
    color:#fff;
    text-shadow:0 0 10px rgba(0,0,0,0.6);
    height:5em;
  }
  .fade-end{
    position:absolute;inset:0;
    background:linear-gradient(180deg,rgba(0,0,0,0),#000);
    opacity:0;transition:opacity 1.5s ease;
    z-index:5;
  }
  .fade-end.show{opacity:1;}
  @media(max-width:600px){
    .text{font-size:1rem;}
    .img-bg img{width:90%;}
  }
</style>
</head>
<body>

<!-- tela inicial -->
<div id="start">
  <button id="beginBtn">começar</button>
</div>

<div class="stage" id="stage">
  <div class="img-bg" id="imgWrap">
    <img id="img1" src="foto1.jpg" alt="">
    <img id="img2" src="foto2.jpg" alt="">
    <img id="img3" src="foto3.jpg" alt="">
    <img id="img4" src="foto4.jpg" alt="">
    <img id="img5" src="foto5.jpg" alt="">
    <img id="img6" src="foto6.jpg" alt="">
  </div>
  <div class="text" id="text"></div>
  <div class="fade-end" id="fadeEnd"></div>
</div>

<audio id="bgAudio" src="musica.mp3" preload="auto"></audio>

<script>
const btn = document.getElementById('beginBtn');
const startScreen = document.getElementById('start');
const audio = document.getElementById('bgAudio');
const textEl = document.getElementById('text');
const imgs = [...document.querySelectorAll('.img-bg img')];
const fadeEnd = document.getElementById('fadeEnd');

const totalDuration = 107000; // total 1m47s
const fadeOutDuration = 4000;
const imgCount = imgs.length;
const typeSpeed = 40; // velocidade de digitação
const eraseSpeed = 25;
const pauseTime = 2000; // pausa entre escrever/apagar

// fragmentos do texto (6 partes pra combinar com imagens)
const messages = [
  "pra minha lalinha.\nou larovski. namurada. paixão. amô. nabinho.",
  "é tão leve com você que até parece estranho tentar escrever algo sério.\nparece que nos conhecemos há tanto tempo que até esqueço que teve um antes.",
  "seis meses, paixão.\nseis meses que a gente se tem e a minha vida já não existe mais sem você dentro dela.",
  "penso nas viagens que ainda temos pra fazer,\nnos filmes que prometemos ver e sempre deixamos pra depois.",
  "você me faz sentir inteiro.\nmais que isso, compreendido.\nme sinto no meu lugar. contigo.",
  "te amo mais que tudo, paixão."
];

let audioStarted = false;
let currentMsg = 0;

// fade util
function fadeAudio(from,to,duration){
  const steps = Math.max(8, Math.round(duration/100));
  let i=0;
  const iv=setInterval(()=>{
    i++;
    audio.volume = from+(to-from)*(i/steps);
    if(i>=steps) clearInterval(iv);
  }, duration/steps);
}

function fadeOutMusic(){
  const steps = Math.max(8, Math.round(fadeOutDuration/100));
  let i=0, from = audio.volume;
  const iv = setInterval(()=>{
    i++;
    audio.volume = from*(1 - i/steps);
    if(i>=steps){ audio.pause(); clearInterval(iv);}
  }, fadeOutDuration/steps);
}

// typewriter effect
async function typeWriter(msg){
  textEl.textContent = "";
  for(let char of msg){
    textEl.textContent += char;
    await new Promise(r=>setTimeout(r,typeSpeed));
  }
  await new Promise(r=>setTimeout(r,pauseTime));
  for(let i=msg.length;i>=0;i--){
    textEl.textContent = msg.slice(0,i);
    await new Promise(r=>setTimeout(r,eraseSpeed));
  }
  await new Promise(r=>setTimeout(r,300));
}

async function startShow(){
  startScreen.style.display='none';
  try { await audio.play(); } catch(e){}
  fadeAudio(0,0.4,1500);
  const startTime = performance.now();

  for(let i=0;i<imgCount;i++){
    imgs.forEach((img,idx)=>img.classList.toggle('show',idx===i));
    await typeWriter(messages[i]);
  }

  fadeOutMusic();
  fadeEnd.classList.add('show');
}

btn.onclick = async ()=>{
  startShow();
};
</script>
</body>
</html>
